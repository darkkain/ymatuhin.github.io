<!doctype html><html lang="ru" manifest="no-manifest"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="google-site-verification" content="HxrscLt9ojX9QB8Aotk9kn7os4j0SDGulJ7U4z4aYwQ"><title>Трюки с SVG и поддержка старыми браузерами — Юрий Матюхин</title><meta name="description" content="Как безопасно использовать SVG, поддержка браузерами, несколько fallback-ов для старых браузеров. "><link rel="canonical" href="http://ymatuhin.ru/front-end/tricks_with_svg_and_safe_use"><link rel="alternate" type="application/rss+xml" title="Юрий Матюхин" href="http://ymatuhin.ru/feed.xml" /><meta property="og:image" content="http://ymatuhin.ru"><meta name="twitter:image:src" content="http://ymatuhin.ru"> <script>document.documentElement.className += " js "</script> <style>﻿i{top:0}html{font:1.25em/1.5 Cambria,TimesNewRoman,"Times New Roman",Times,Baskerville,Georgia,serif !important;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;text-rendering:optimizelegibility;-moz-osx-font-smoothing:grayscale}body{margin:0 auto;padding:2em;max-width:36em;color:#222 !important;background:#fff !important;font:inherit !important}body>*:first-child{margin-top:0;padding-top:0}html.js .noscript{display:none !important;visibility:hidden}.short-link{opacity:0;border:0;margin-left:-.74em;-webkit-transition:opacity .3s 1s;transition:opacity .3s 1s}img{max-width:100%;display:block;margin:1em auto;vertical-align:middle}h1{font-size:2em;line-height:1.3}h1,h2,h3,h4{font-weight:normal;margin:0;padding:.67em 0}h1+*,h2+*,h3+*,h4+*{margin-top:0 !important}a{text-decoration:none;border-bottom:1px solid;background-color:transparent;-webkit-transition:color .2s;transition:color .2s}a:active,a:hover{outline:0}a:link{color:#008ACE}a:visited{color:#B40EB4}a:hover{color:#c00}blockquote{margin:1em -2em;padding:1px 2em;background:#fffab2;border-radius:3px;clear:both}code{padding:.1em .3em}mark{padding:.05em .2em}small{font-size:80%}pre{overflow:auto}.posts{margin:1em 0 0;padding:1px 0 1px;list-style-type:none}.posts li{position:relative;margin-bottom:1.4em}.posts li:last-child{margin-bottom:0}.posts li:before{content:"—";white-space:nowrap;position:absolute;right:100%;margin-right:.44em}.posts mark a{border:0;color:inherit}.tags{margin:-1.3em 0 0;padding-bottom:1.3em}.tag{font-size:.8em;font-weight:normal;padding:.2em .4em;background:#f0f0f0;border-radius:3px;border:0;color:#000 !important;font-style:italic;opacity:.5}.tag{-webkit-transition:opacity .2s;transition:opacity .2s}.tag strong{font-weight:normal}.tag:hover{opacity:1}.tags+*{margin-top:0}.tags+*>*{margin-top:0}@media (max-width: 800px){blockquote,.highlight,#disqus_thread{border-radius:0 !important}}@media (max-width: 480px){html{font-size:1em !important}body{padding:1em}ul,ol{margin-left:0}.short-link{margin-left:0;opacity:1;-webkit-transition:none;transition:none}blockquote,.highlight,#disqus_thread{margin:1em -1em !important;padding:1px 1em !important}.posts li:before{position:static}.message{margin-top:0 !important}}.thanks{margin:2em 0 0;line-height:1.8}</style><noscript><link rel="stylesheet" type="text/css" href="/css/secondary.css"></noscript> <small><a href="/">Главная</a> → <a href="/front-end/">Заметки разработчика интерфейсов</a> → Эта страница</small><h1><a id="title" href="#title" class="short-link">#</a>&nbsp;Трюки с SVG и поддержка старыми браузерами</h1><p class="tags"> <a class="tag" href="/tags/#svg"><strong>svg</strong></a> <a class="tag" href="/tags/#изображения"><strong>изображения</strong></a> <a class="tag" href="/tags/#css"><strong>css</strong></a><div class="post"><p style="margin-top:0"><img style="margin-top:0" class="noshadow" src="/img/svg/svg_logo.png" alt="Логотип SVG"><p>Раньше я не использовал SVG, поскольку рабочие проекты были с поддержкой Internet Explorer 6/7. Да и не требовалось поддержки ретины. Но сейчас, спустя время, настало время использовать SVG на полную.<h2><a id="support" href="#support" class="short-link">#</a>&nbsp;Поддержка браузерами</h2><p>На данный момент, SVG поддерживается всеми современными браузерами, начиная с Inernet Explorer 9 (<a href="http://caniuse.com/#feat=svg">CIU</a>). По данным сайта Can I Use, SVG поддерживается в мире на 94.55% и на 83.13% в России. Самая главная проблема — это IE 8, доля которого все еще достаточно велика.<h2><a id="fallback" href="#fallback" class="short-link">#</a>&nbsp;Fallback</h2><p>У нас есть два варианта использования SVG изображений:<ol><li>В теге <code>img</code> — <code>&lt;img src=&quot;test.svg&quot; alt=&quot;&quot;&gt;</code><li>Через CSS свойство <code>background-image</code> — <code>background-image: url(test.svg)</code></ol><p>Для этих двух способов есть очень изящные решения. Начнем со способа в котором мы используем тег <code>img</code>.<h3><a id="with-img-tag" href="#with-img-tag" class="short-link">#</a>&nbsp;Использование SVG изображения через тег <code>img</code></h3><p>Вместо привычно кода, напишем в нашем HTML следующий код:<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;svg</span> <span class="na">width=</span><span class="s">&quot;100&quot;</span> <span class="na">height=</span><span class="s">&quot;100&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;image</span> <span class="na">xlink:href=</span><span class="s">&quot;test.svg&quot;</span> <span class="na">src=</span><span class="s">&quot;test.png&quot;</span> <span class="na">width=</span><span class="s">&quot;100&quot;</span> <span class="na">height=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/svg&gt;</span></code></pre></div><p>После обработки этого кода браузером, который поддерживает SVG, он проигнорирует атрибут <code>src</code> и покажет векторную картинку <code>test.svg</code>.<div class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;svg</span> <span class="na">width=</span><span class="s">&quot;96&quot;</span> <span class="na">height=</span><span class="s">&quot;96&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;image</span> <span class="na">xlink:href=</span><span class="s">&quot;test.svg&quot;</span> <span class="na">width=</span><span class="s">&quot;100&quot;</span> <span class="na">height=</span><span class="s">&quot;100&quot;</span><span class="nt">/&gt;</span>
<span class="nt">&lt;/svg&gt;</span></code></pre></div><p>А браузеры, которые не поддерживают SVG, проигнорируют неизвестный тег SVG. Но из-за того, что img и image это одно и то-же, то они увидят этот код вот таким:<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="o">&lt;</span><span class="nt">img</span> <span class="nt">src</span><span class="o">=</span><span class="s2">&quot;test.png&quot;</span> <span class="nt">width</span><span class="o">=</span><span class="s2">&quot;100&quot;</span> <span class="nt">height</span><span class="o">=</span><span class="s2">&quot;100&quot;</span><span class="o">&gt;</span></code></pre></div><p>То есть покажут нашу <code>png</code> картинку. Вот такая вот магия :-)<h3><a id="with-css-property" href="#with-css-property" class="short-link">#</a>&nbsp;Использование SVG изображения через CSS свойство background-image</h3><p>Тут есть несколько решений. Одно из них использовать библиотеку Modernizr и если в браузере не будет поддержки SVG, то можно будет задать фоновое изображение другого формата через класс у html <code>no-svg</code>.<p>Этот путь требует библиотеку Modernizr и наличие включенного JavaScript. Но этого можно избежать, весь есть более <em>элегантное</em> решение:<div class="highlight"><pre><code class="language-css" data-lang="css"><span class="nc">.my-element</span> <span class="p">{</span>
  <span class="k">background-image</span><span class="o">:</span> <span class="sx">url(test.png)</span><span class="p">;</span>
  <span class="k">background-image</span><span class="o">:</span>
    <span class="n">linear</span><span class="o">-</span><span class="n">gradient</span><span class="p">(</span><span class="k">transparent</span><span class="o">,</span> <span class="k">transparent</span><span class="p">)</span><span class="o">,</span>
    <span class="sx">url(test.svg)</span><span class="p">;</span>
<span class="p">}</span></code></pre></div><p>Этот способ использует multiple backgrounds для определения поддержки SVG. Он практически идеален, за исключением стандартного браузера Android 2.3.<p>Теперь, я буду использовать SVG гораздо чаще. Осталось только разобраться как экспортировать его из фигур в Photoshop, но это совсем другая история...</div><p class="page-arrows-box"> <a class="page-arrows page-arrows_prev" href="/front-end/better_box_sizing/">Международный день box-sizing и лучшие практики</a> <a class="page-arrows page-arrows_next" href="/front-end/one_more_article_about_rem_vs_em/">Еще одна статья про REM vs EM</a><div id="disqus_thread"></div><div class="noscript">Пожалуйста влючите JavaScript чтобы увидеть <a href="https://disqus.com/?ref_noscript" rel="nofollow">комментарии.</a></div><div class="thanks"><div class="share42init" data-path="/js/"></div><em>Apr 19, 2015</em> <br> <em>Подпишитесь на <a href="http://eepurl.com/bkY7hb">еженедельную рассылку</a> новых записей или <a href="http://feeds.feedburner.com/ymatuhin/SHDd">RSS ленту</a>.</em> <br> <em>С наилучшими пожеланиями из Брянска, <a href="/">Юрий Матюхин</a>.</em></div><script src="/js/main.min.js" async data-no-instant></script>  <img src="//mc.yandex.ru/watch/28017147" class="noscript" style="position:absolute; left:-9999px;"> <script>document.querySelector('img.noscript').removeAttribute('src')</script>
