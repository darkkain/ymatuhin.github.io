---
layout: post
title: Правильный сниппет медиа выражений для retina
description: >
  Которкий сниппет media quires для определения retina дисплеев и старые сниппеты от которых нужно давно избавиться.
categories: blog
tags: [css, retina, лучшие практики, media quires]
image: /img/media_queries/support.png
---

<p>Я видел разные способы определения мониторов retina. Одни объемные, другие наоборот. Разберемся какие из media quires изпользовать.</p>

<h2><a id="solution" href="#solution" aria-hidden="true" class="short-link">#</a> Правильное решение для retina (2x)</h2>

{% highlight css %}
@media (-webkit-min-device-pixel-ratio: 2),
(min-resolution: 192dpi) {
    /* CSS правила для retina */
}
{% endhighlight %}

<p>Этот сниппет определяет только ретина дисплеи (2х), но есть еще и дисплеи с <code>device-pixel-ratio</code> больше 1 и меньше 2 — мобильные телефоны. Для них лучше тоже показывать оптимизированные под retina изображения. У себя в сниппете я проверяю на <code>120dpi</code>:</p>

{% highlight css %}
/* 1.25 dpr */
@media
(-webkit-min-device-pixel-ratio: 1.25),
(min-resolution: 120dpi){
    /* CSS правила для retina */
}
{% endhighlight %}

<p>Какой из них использовать решать вам. Предупрежу, что если <code>dpi</code> больше 1 и меньше 2, то это мобильное устройство. А если загружать для мобильного устройства оптимизированную под ретина дисплеи графику, то сайт будет дольше загружаться. Что важно для пользователей мобильных устройств.</p>

<h2><a id="why" href="#why" aria-hidden="true" class="short-link">#</a>&nbsp;Почему эти правила</h2>

<p>Ответ найдем в поддержке браузерами этих свойств. Открываем <a href="http://caniuse.com/#feat=css-media-resolution">caniuse</a> и видим следующее:</p>

<figure itemscope itemtype="http://schema.org/ImageObject">
	<img itemprop="contentUrl" alt="Поддержка Media Queries в браузерах" src="/img/media_queries/support.png">
	<figcaption itemprop="description">Поддержка Media Queries в браузерах</figcaption>
</figure>

<p>Зеленые столбцы и столбцы с номером 1 — поддерживают min/max resolution с единицами измерения <code>dpi</code>, а столбцы с номером 3 — поддерживают <code>-webkit-device-pixel-ratio</code>. То есть нам требуются только эти два свойства.</p>

<h3><a id="why" href="#why" aria-hidden="true" class="short-link">#</a> Старые правила (не используйте)</h3>

{% highlight css %}
@media
only screen and (-webkit-min-device-pixel-ratio: 2),
only screen and (   min--moz-device-pixel-ratio: 2),
only screen and (     -o-min-device-pixel-ratio: 2/1) {
  /* CSS правила для retina */
}
{% endhighlight %}

<p>Или даже</p>

{% highlight css %}
@media
only screen and (-webkit-min-device-pixel-ratio: 2),
only screen and (   min--moz-device-pixel-ratio: 2),
only screen and (     -o-min-device-pixel-ratio: 2/1),
only screen and (        min-device-pixel-ratio: 2),
only screen and (                min-resolution: 192dpi),
only screen and (                min-resolution: 2dppx) {
  /* CSS правила для retina */
}
{% endhighlight %}

<footer class="keywords section-subtitle visuallyhidden" aria-hidden="true" role="contentinfo">
    <h3>ретина css</h3>
    <h4>retina media quires</h4>
    <h5>ретина медиа выражения</h5>
</footer>
