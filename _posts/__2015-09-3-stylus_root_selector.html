---
layout: post
title: Пишем БЭМ на Stylus c использованием root
description: >
  Обращаемся к корневому БЭМ элементу при использовании препроцессора Stylus.
categories: blog
tags: [stylus, root, сниппет]
published: false
---

перевести http://blog.legomushroom.com/2014/06/nesting-tree-traversal-in-stylus/

<p>Stylus — мой любимый CSS препроцессор, так-же как и методология БЭМ. Stylus позволяет писать БЭМ нотацию очень просто, в том числе и вложенную. Но иногда требуется получить доступ к названию корневого элемента, к примеру в такой ситуации:</p>

<div class="highlight">
<pre>
.checkbox
    &__shown-text
        color red

    &__input
        display inline-block

        &:checked .checkbox__shown-text
            color white
</pre>
</div>

<p>Подсвечиваем текст красным если включен чекбокс. Мы видим дубликацию класса <code>.checkbox</code> в селекторе <code>&:checked .checkbox__shown-text</code>. Таким образом если нам понадобится переименовать корневой элемент, то придется искать где он еще используется, что неудобно. Для решения этой проблемы есть 2 способа: через интерполяцию и через примесь.</p>

<!-- more -->

<h2><a id="way1" href="#way1" aria-hidden="true" class="short-link">#</a> Способ #1 с использованием интерполяции</h2>

<p>Сохраняем название корневого элемента перед использованием в переменную <code>root</code>, а потом интерполируем её через <code>{root}</code>.</p>

<div class="highlight">
<pre>
root = '.checkbox'

{root}
    &__shown-text
        color red

    &__input
        display inline-block

        &:checked {root}__shown-text
            color white
</pre>
</div>

<p>Способ хорош тем, что в других препроцессорах работает примерно так-же. Из минусов — нужно писать лишний код.</p>

<h2><a id="way1" href="#way1" aria-hidden="true" class="short-link">#</a> Способ #2 с использованием примеси</h2>

<p>Создаем 2 примеси, <code>replace-in-selector</code> — вспомогательная:</p>

<div class="highlight">
<pre>
/* MIXINS */
replace-in-selector($what, $with = '')
  /{replace($what, $with , selector())}
    {block}

root()
  +replace-in-selector('^(\S+)(_|__|\s|::?).+$', '$1')
    {block}
</pre>
</div>

<p>Теперь используем примесь через <code>+root()</code>:</p>

<div class="highlight">
<pre>
.checkbox
    &__shown-text
        color red

    &__input
        display inline-block

        &:checked +root()__shown-text
            color white
</pre>
</div>

<footer class="keywords section-subtitle visuallyhidden" aria-hidden="true" role="contentinfo">
    <h3>stylus root</h3>
    <h3>бэм корневой элемент</h3>
    <h4>бэм stylus</h4>
</footer>
