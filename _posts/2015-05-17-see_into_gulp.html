---
layout: post
title: Разбираемся со сборкой front end на Gulp
description: >
  Обзор основных возможностей новой системы для сборки проектов — Gulp, а так-же с изучаем как работают его основные функциии.
categories: front-emd
redirect_from:
  - /blog/see_into_gulp/
tags: [gulp, frontend, сборка]
keywords: >
  gulp watch task src dist сборка front end клиент pipe
image: /img/gulp/logo.png
---

<p>В последнее время <strong>Gulp</strong> набирает большую популярность, и понятно почему. Он быстрее, красивее и проще чем <strong>Grunt</strong>. Мне приходилось часто с ним работать, но я всегда брал готовые решения и не до конца понимал как же он все это делает. На этих выходных я решил разобрать и закрыть эту небольшую проблему. Об этом и поговорим сегодня.</p>

<figure itemscope itemtype="http://schema.org/ImageObject">
	<img itemprop="contentUrl" width="400" alt="Собираем front end на gulp" src="/img/gulp/logo.png">
	<figcaption itemprop="description">Собираем front end на gulp</figcaption>
</figure>

<h2>Что такое Gulp?</h2>

<p>Gulp — это инструмент сборки front-a. Он позволяет автоматизировать повторяющиеся задачи (сборка и минификация CSS- и JS-файлов, запуск тестов, перезагрузка браузера и другие). Тем самым Gulp ускоряет и оптимизирует процесс веб-разработки.</p>

<h2>Установка Gulp</h2>
<p>Установить Gulp достаточно легко. Если у вас что-то не получится, пишите в комментариях или загуглите вашу проблему. Итак для установки нужно сделать 3 шага:</p>

<ul>
<li>Установить Gulp глобально;</li>
<li>Установить Gulp как <code>devDependencies</code> (зависимости для разработки);</li>
<li>Создать файл <code>gulpfile.js</code>;</li>
</ul>

<p>Первый шаг — устанавливаем глобально Gulp. Открываем терминал и пишем:</p>
{% highlight bash %}
npm install --global gulp
{% endhighlight %}

<p>После этого вам нужно установить Gulp как <code>devDependencies</code> для вашего проекта. Убедитесь в том, что у вас есть файл <code>package.json</code>. Если его нет, то создайте его написав в консоль <code>npm init</code>. Теперь можно установить Gulp как <code>devDependencies</code>:</p>
{% highlight bash %}
npm install --save-dev gulp
{% endhighlight %}

<p>И наконец, вам нужно создать <code>gulpfile.js</code> в корне вашего проекта, который будет содержать ваши задачи (tasks). В качестве промежуточного шага, мы установим плагин <code>gulp-util</code>. Чтобы показать как устанавливаются плагины:</p>
{% highlight bash %}
npm install --save-dev gulp-util
{% endhighlight %}

<p>Теперь настало время написать нашу первую задачку. Открываем только что созданный файл <code>gulpfile.js</code> и пишем в него следующее:</p>
{% highlight javascript %}
/* File: gulpfile.js */

// собираем все наши плагины
var gulp  = require('gulp'),
    gutil = require('gulp-util');

// создаем задачку, которая будет выполняться по умолчанию
gulp.task('default', function() {
  return gutil.log('Gulp is running!')
});
{% endhighlight %}

<p>И теперь нам остается запустить gulp в терминале и мы увидим нечто похожее на это:</p>
{% highlight bash %}
> gulp
[12:32:08] Using gulpfile ~/Projects/gulp-scotch-io/gulpfile.js
[12:32:08] Starting 'default'...
[12:32:08] Gulp is running!
[12:32:08] Finished 'default' after 1 ms
{% endhighlight %}

<h2>Обзор</h2>
<p>Сам по себе Gulp очень скуден на возможности. Но все, что вам нужно вынесено в отдельные плагины. Они совместно с Gulp творят чудеса.</p>

<p>Api у gulp очень маленькое, и содержит всего 4 функции высшего порядка:</p>
<ul>
    <li><code>gulp.task</code></li>
    <li><code>gulp.src</code></li>
    <li><code>gulp.dest</code></li>
    <li><code>gulp.watch</code></li>
</ul>

<p><code>gulp.task</code> определяет наши задачи. В качестве аргументов принимает название, зависимости (массив) и функцию (основные действия). Зависимостей может и не быть:</p>
{% highlight javascript %}
gulp.task('mytask', function() {
  //сделать что-то
});

gulp.task('dependenttask', ['mytask'], function() {
  //сделать что-то после того, как 'mytask' будет выполнен
});
{% endhighlight %}

<p><code>gulp.src</code> указывает на файлы, которые мы хотим использовать. Он использует <code>.pipe</code> доступа к файлам через плагины.</p>

<p><code>gulp.dest</code> указывает на папку, в которую мы хотим сохранить измененные файлы.</p>

<p><code>gulp.src</code> и <code>gulp.dest</code> используется для простой копии файлов:</p>
{% highlight javascript %}
gulp.task('copyHtml', function() {
  // скопировать все html файлы из source/ в public/
  gulp.src('source/*.html').pipe(gulp.dest('public'));
});
{% endhighlight %}

<p>В gulp встроена система реагирования на изменения файлов (<code>gulp.watch</code>). Вы можете использовать эту задачу для запуска других необходимых вам задач при изменении файлов.</p>

{% highlight javascript %}
gulp.watch('source/**/*.html', ['copyHtml']);
{% endhighlight %}

<p>Этот пример будет выполнять задачу <code>copyHtml</code> когда любой html файл в папке source изменится.</p>

<p>В следующей статье мы разберемся подробнее о задачах, синхронность и асинхронностью и напишем что-нибудь полезное.</p>
